<!DOCTYPE html>
<html lang="en">
<head>
    <title>CSWP Final Assignment - Home</title>
    <meta charset="utf-8" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

	<!--Google API and Key-->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBWGWotumEr74o0at1GwIyfTAEPJzYSl3c&sensor=false"></script>
    <script type="text/javascript" src="js/mapScript.js"></script>
    <link rel="stylesheet" type="text/css" href="css/component.css" />
    <script src="js/modernizr.custom.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">google.load("feeds", "1");</script>


</head>

<body class="body">
<div id="wrapper">
	<header class="mainHeader">
    	<a href="#"><img src="images/logo.gif"></a>
    </header>
    <nav class="sideNav">
    <ul>
        <li><a id="active" href="index.html">Home </a></li>
        <li><a href="metguide.html">School map</a></li>
        <li><a href="gallery.html">Photos</a></li>
        <li><a href="menu.html">Cateferia Menu</a></li>
    </ul>
    </nav>
        <content class="mainContent">
        <h1>This week's menu at UniCafe Metropolia Vanha Maatie</h1>
        <h3>Data only available from Monday to Thursday for this location. Reason unknown!</h3>
			<div id="menu"></div>
		</content>


</div>

 

<footer class="mainFooter">
        <p>Copyright Joakim and Marc</p>
    </footer>

    

    <script>
 $(document).ready(function(){
    var feed = new google.feeds.Feed('http://www.hyyravintolat.fi/rss/eng/32/');
    feed.load(function (data) {
    
    // Incomming data is supposed to be JSON but getting an error when trying to parse it directly. Stringifying it solves the issue.
    var str = JSON.stringify(data, undefined, 2);
    
    //Now we can parse the JSON object into a plain JS object.
    var obj = jQuery.parseJSON(str);

    //obj.feed.entries contains an array for every day of the week.
    var entries = obj.feed.entries;
    var div = document.getElementById('menu');

    //using the forEach loop to print the contennt of the array.
    entries.forEach(function(entry){
        //console.log(entry);
        var content = entry.content;
        var HTMLstripped = content.replace(/(<([^>]+)>)/ig,"");
        div.innerHTML += '<b>' + entry.title + ('<b><br>');
        div.innerHTML += HTMLstripped + ('<br><br><br>');
    });    
    
    });
 });
</script>

</body>

</html>
